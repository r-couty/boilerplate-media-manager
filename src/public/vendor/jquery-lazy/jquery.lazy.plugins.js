!function(t,e){"use strict";function a(a,r,n,c,s){function u(){T=t.devicePixelRatio>1,n=d(n),r.delay>=0&&setTimeout(function(){f(!0)},r.delay),(r.delay<0||r.combined)&&(c.e=function(t,e){var o,n=0;return function(i,c){function s(){n=+new Date,e.call(a,i)}var u=+new Date-n;o&&clearTimeout(o),u>t||!r.enableThrottle||c?s():o=setTimeout(s,t-u)}}(r.throttle,function(t){"resize"===t.type&&(w=z=-1),f(t.all)}),c.a=function(t){t=d(t),n.push.apply(n,t)},c.g=function(){return n=o(n).filter(function(){return!o(this).data(r.loadedName)})},c.f=function(t){for(var e=0;e<t.length;e++){var a=n.filter(function(){return this===t[e]});a.length&&f(!1,a)}},f(),o(r.appendScroll).on("scroll."+s+" resize."+s,c.e))}function d(t){for(var n=r.defaultImage,i=r.placeholder,c=r.imageBase,s=r.srcsetAttribute,u=r.loaderAttribute,d=r._f||{},f=0,l=(t=o(t).filter(function(){var t=o(this),a=v(this);return!t.data(r.handledName)&&(t.attr(r.attribute)||t.attr(s)||t.attr(u)||d[a]!==e)}).data("plugin_"+r.name,a)).length;f<l;f++){var m=o(t[f]),h=v(t[f]),p=m.attr(r.imageBaseAttribute)||c;h===N&&p&&m.attr(s)&&m.attr(s,g(m.attr(s),p)),d[h]===e||m.attr(u)||m.attr(u,d[h]),h===N&&n&&!m.attr(B)?m.attr(B,n):h===N||!i||m.css(Z)&&"none"!==m.css(Z)||m.css(Z,"url('"+i+"')")}return t}function f(t,e){if(n.length){for(var i=e||n,c=!1,s=r.imageBase||"",u=r.srcsetAttribute,d=r.handledName,f=0;f<i.length;f++)if(t||e||m(i[f])){var h=o(i[f]),p=v(i[f]),g=h.attr(r.attribute),A=h.attr(r.imageBaseAttribute)||s,y=h.attr(r.loaderAttribute);h.data(d)||r.visibleOnly&&!h.is(":visible")||!((g||h.attr(u))&&(p===N&&(A+g!==h.attr(B)||h.attr(u)!==h.attr(D))||p!==N&&A+g!==h.css(Z))||y)||(c=!0,h.data(d,!0),l(h,p,A,y))}c&&(n=o(n).filter(function(){return!o(this).data(d)}))}else r.autoDestroy&&a.destroy()}function l(t,e,a,n){++b;var i=function(){y("onError",t),A(),i=o.noop};y("beforeLoad",t);var c=r.attribute,s=r.srcsetAttribute,u=r.sizesAttribute,d=r.retinaAttribute,f=r.removeAttribute,l=r.loadedName,m=t.attr(d);if(n){var h=function(){f&&t.removeAttr(r.loaderAttribute),t.data(l,!0),y(j,t),setTimeout(A,1),h=o.noop};t.off(L).one(L,i).one(C,h),y(n,t,function(e){e?(t.off(C),h()):(t.off(L),i())})||t.trigger(L)}else{var p=o(new Image);p.one(L,i).one(C,function(){t.hide(),e===N?t.attr(Q,p.attr(Q)).attr(D,p.attr(D)).attr(B,p.attr(B)):t.css(Z,"url('"+p.attr(B)+"')"),t[r.effect](r.effectTime),f&&(t.removeAttr(c+" "+s+" "+d+" "+r.imageBaseAttribute),u!==Q&&t.removeAttr(u)),t.data(l,!0),y(j,t),p.remove(),A()});var v=(T&&m?m:t.attr(c))||"";p.attr(Q,t.attr(u)).attr(D,t.attr(s)).attr(B,v?a+v:null),p.complete&&p.trigger(C)}}function m(t){var e=t.getBoundingClientRect(),a=r.scrollDirection,o=r.threshold,n=p()+o>e.top&&-o<e.bottom,i=h()+o>e.left&&-o<e.right;return"vertical"===a?n:"horizontal"===a?i:n&&i}function h(){return w>=0?w:w=o(t).width()}function p(){return z>=0?z:z=o(t).height()}function v(t){return t.tagName.toLowerCase()}function g(t,e){if(e){var a=t.split(",");t="";for(var r=0,o=a.length;r<o;r++)t+=e+a[r].trim()+(r!==o-1?",":"")}return t}function A(){--b,n.length||b||y("onFinishedAll")}function y(t,e,o){return!!(t=r[t])&&(t.apply(a,[].slice.call(arguments,1)),!0)}var b=0,w=-1,z=-1,T=!1,j="afterLoad",C="load",L="error",N="img",B="src",D="srcset",Q="sizes",Z="background-image";"event"===r.bind||i?u():o(t).on(C+"."+s,u)}function r(r,i){var c=this,s=o.extend({},c.config,i),u={},d=s.name+"-"+ ++n;return c.config=function(t,a){return a===e?s[t]:(s[t]=a,c)},c.addItems=function(t){return u.a&&u.a("string"===o.type(t)?o(t):t),c},c.getItems=function(){return u.g?u.g():{}},c.update=function(t){return u.e&&u.e({},!t),c},c.force=function(t){return u.f&&u.f("string"===o.type(t)?o(t):t),c},c.loadAll=function(){return u.e&&u.e({all:!0},!0),c},c.destroy=function(){return o(s.appendScroll).off("."+d,u.e),o(t).off("."+d),u={},e},a(c,s,r,u,d),s.chainable?r:c}var o=t.jQuery||t.Zepto,n=0,i=!1;o.fn.Lazy=o.fn.lazy=function(t){return new r(this,t)},o.Lazy=o.lazy=function(t,a,n){if(o.isFunction(a)&&(n=a,a=[]),o.isFunction(n)){t=o.isArray(t)?t:[t],a=o.isArray(a)?a:[a];for(var i=r.prototype.config,c=i._f||(i._f={}),s=0,u=t.length;s<u;s++)(i[t[s]]===e||o.isFunction(i[t[s]]))&&(i[t[s]]=n);for(var d=0,f=a.length;d<f;d++)c[a[d]]=t[0]}},r.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:t,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:e,afterLoad:e,onError:e,onFinishedAll:e},o(t).on("load",function(){i=!0})}(window),function(t){function e(e,a,r,o){var n;"POST"!==(o=o?o.toUpperCase():"GET")&&"PUT"!==o||!e.config("ajaxCreateData")||(n=e.config("ajaxCreateData").apply(e,[a])),t.ajax({url:a.attr("data-src"),type:"POST"===o||"PUT"===o?o:"GET",data:n,dataType:a.attr("data-type")||"html",success:function(t){a.html(t),r(!0),e.config("removeAttribute")&&a.removeAttr("data-src data-method data-type")},error:function(){r(!1)}})}t.lazy("ajax",function(t,a){e(this,t,a,t.attr("data-method"))}),t.lazy("get",function(t,a){e(this,t,a,"GET")}),t.lazy("post",function(t,a){e(this,t,a,"POST")}),t.lazy("put",function(t,a){e(this,t,a,"PUT")})}(window.jQuery||window.Zepto),function(t){t.lazy(["av","audio","video"],["audio","video"],function(e,a){var r=e[0].tagName.toLowerCase();if("audio"===r||"video"===r){var o=e.find("data-src"),n=e.find("data-track"),i=0,c=function(){++i===o.length&&a(!1)},s=function(){var e=t(this),a=e[0].tagName.toLowerCase(),r=e.prop("attributes"),o=t("data-src"===a?"<source>":"<track>");"data-src"===a&&o.one("error",c),t.each(r,function(t,e){o.attr(e.name,e.value)}),e.replaceWith(o)};e.one("loadedmetadata",function(){a(!0)}).off("load error").attr("poster",e.attr("data-poster")),o.length?o.each(s):e.attr("data-src")?(t.each(e.attr("data-src").split(","),function(a,r){var o=r.split("|");e.append(t("<source>").one("error",c).attr({src:o[0].trim(),type:o[1].trim()}))}),this.config("removeAttribute")&&e.removeAttr("data-src")):a(!1),n.length&&n.each(s)}else a(!1)})}(window.jQuery||window.Zepto),function(t){t.lazy(["frame","iframe"],"iframe",function(e,a){var r=this;if("iframe"===e[0].tagName.toLowerCase()){var o=e.attr("data-error-detect");"true"!==o&&"1"!==o?(e.attr("src",e.attr("data-src")),r.config("removeAttribute")&&e.removeAttr("data-src data-error-detect")):t.ajax({url:e.attr("data-src"),dataType:"html",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(t){e.html(t).attr("src",e.attr("data-src")),r.config("removeAttribute")&&e.removeAttr("data-src data-error-detect")},error:function(){a(!1)}})}else a(!1)})}(window.jQuery||window.Zepto),function(t){t.lazy("noop",function(){}),t.lazy("noop-success",function(t,e){e(!0)}),t.lazy("noop-error",function(t,e){e(!1)})}(window.jQuery||window.Zepto),function(t){var e="data-src";function a(a,r,n){var i=a.prop("attributes"),c=t("<"+r+">");return t.each(i,function(t,a){"srcset"!==a.name&&a.name!==e||(a.value=o(a.value,n)),c.attr(a.name,a.value)}),a.replaceWith(c),c}function r(e,a,r){var o=t("<img>").one("load",function(){r(!0)}).one("error",function(){r(!1)}).appendTo(e).attr("src",a);o.complete&&o.load()}function o(t,e){if(e){var a=t.split(",");t="";for(var r=0,o=a.length;r<o;r++)t+=e+a[r].trim()+(r!==o-1?",":"")}return t}t.lazy(["pic","picture"],["picture"],function(n,i){if("picture"===n[0].tagName.toLowerCase()){var c=n.find(e),s=n.find("data-img"),u=this.config("imageBase")||"";c.length?(c.each(function(){a(t(this),"source",u)}),1===s.length?((s=a(s,"img",u)).on("load",function(){i(!0)}).on("error",function(){i(!1)}),s.attr("src",s.attr(e)),this.config("removeAttribute")&&s.removeAttr(e)):n.attr(e)?(r(n,u+n.attr(e),i),this.config("removeAttribute")&&n.removeAttr(e)):i(!1)):n.attr("data-srcset")?(t("<source>").attr({media:n.attr("data-media"),sizes:n.attr("data-sizes"),type:n.attr("data-type"),srcset:o(n.attr("data-srcset"),u)}).appendTo(n),r(n,u+n.attr(e),i),this.config("removeAttribute")&&n.removeAttr(e+" data-srcset data-media data-sizes data-type")):i(!1)}else i(!1)})}(window.jQuery||window.Zepto),(window.jQuery||window.Zepto).lazy(["js","javascript","script"],"script",function(t,e){"script"===t[0].tagName.toLowerCase()?(t.attr("src",t.attr("data-src")),this.config("removeAttribute")&&t.removeAttr("data-src")):e(!1)}),(window.jQuery||window.Zepto).lazy("vimeo",function(t,e){"iframe"===t[0].tagName.toLowerCase()?(t.attr("src","https://player.vimeo.com/video/"+t.attr("data-src")),this.config("removeAttribute")&&t.removeAttr("data-src")):e(!1)}),(window.jQuery||window.Zepto).lazy(["yt","youtube"],function(t,e){if("iframe"===t[0].tagName.toLowerCase()){var a=/1|true/.test(t.attr("data-nocookie"));t.attr("src","https://www.youtube"+(a?"-nocookie":"")+".com/embed/"+t.attr("data-src")+"?rel=0&amp;showinfo=0"),this.config("removeAttribute")&&t.removeAttr("data-src")}else e(!1)});
